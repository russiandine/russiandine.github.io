<!DOCTYPE html>
<html>

<head>
    <style>
        .sidebar {
            
            top: 0px;
            left: 0px;
            position: absolute;
            width: 300px;
            height: 100%;
            
            z-index: 1;
            
            text-align: center;



        }

        #img1 {
            display: block;
            opacity: 4;
            
        }
    </style>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <canvas id="canvas" width="1000" height="1000"></canvas>
    <img id="img1" src="Peter.png">



    <div class="sidebar">


        <p class="sidemenu" id="clicks">ðŸŒ  0</p>

        <div class="AllUpgrades">

            <div class="butt" class="sidemenu" id="button">+1/click = $10</div>
            <div class="butt" class="sidemenu" id="button2">auto = $300</div>
            <div class="butt" class="sidemenu" id="button3">autospeed = $600</div>

        </div>

    </div>


</body>

</html>
<script>

    var sx = [0, 100]


    var clicks = document.getElementById("clicks")
    var upgrade1 = 10
    var auto = 300
    var upgradeAuto = 600
    var costMultiplier = 0
    var addCostMulti = 0
    var clicksAdd = 1 //adds number of clicks per sun click
    var button = document.getElementById("button");
    var button2 = document.getElementById("button2");
    var button3 = document.getElementById("button3");
    var clickedin = false

    var clicksPerInterval = 0
    document.getElementById("img1").addEventListener("click", clickfun);
    document.getElementById("button").addEventListener("click", upgrade);
    document.getElementById("button2").addEventListener("click", auto1);
    document.getElementById("button3").addEventListener("click", upgradeAuto1)
    button.addEventListener("click", upgrade);


    document.getElementById("canvas")
    var ctx = canvas.getContext("2d")


    canvas.width = innerWidth
    canvas.height = innerHeight
    var dx = canvas.width/2
    var dy = canvas.height/2
    var i = 0


    var clicksnum = 0
    setInterval(e, 10)
    setInterval(update2, 500)
    

    function e() {

        var img1 = document.getElementById("img1");
        
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(img1, sx[i], 0, 100, 100,dx,dy, 300, 200)
        if (clickedin === true) {
            upgrade();
            auto1();
            upgradeAuto1();
        }
        ctx.beginPath();
        ctx.arc(100, 75, 50, 0, 2 * Math.PI);
        ctx.fill();




    }
    const img1 = document.getElementById('img1')
    img1.addEventListener("click", () => {
        i = 1
    });



    function update() {
        clicksnum = clicksnum + clicksAdd
        document.getElementById("clicks").innerText = "ðŸŒ  " + clicksnum
    }
    function update2() {
        clicksnum = clicksnum + clicksPerInterval
        document.getElementById("clicks").innerText = "ðŸŒ  " + clicksnum
        if (i = 1) {
            i = 0
        }
    }

    function clickfun() {
        clicksnum = clicksnum + clicksAdd
        clicks.innerText = "ðŸŒ  " + clicksnum
    }

    function upgrade() {
        if (clicksnum >= upgrade1) {
            clicksnum = clicksnum - upgrade1
            costMultiplier = 2
            upgrade1 = upgrade1 * costMultiplier
            document.getElementById("button").innerText = "+1/click = $" + upgrade1
            clicksAdd = clicksAdd + 1
        }

    }
    function auto1() {
        if (clicksnum >= auto) {
            clicksnum = clicksnum - auto
            clicksPerInterval = clicksPerInterval + 1
            costMultiplier = 2.5
            auto = auto * costMultiplier
            document.getElementById("button2").innerText = "auto = $" + auto
            document.getElementById("button2").style.display = "none"
            document.getElementById("button2").classList.remove('butt')
            if (document.getElementById("button2").classList.contains('butt')) {

                document.getElementById("button2").classList.remove('butt');

            }
        }
    }
    function upgradeAuto1() {
        if (clicksnum >= upgradeAuto) {
            clicksnum = clicksnum - upgradeAuto
            clicksPerInterval = clicksPerInterval + 1
            upgradeAuto = Math.round(upgradeAuto * costMultiplier)
            document.getElementById("button3").innerText = "upgradeAuto = $" + upgradeAuto
        }
        if (clicksPerInterval >= 2) {
            clicksPerInterval = clicksPerInterval * 2
        }


    }


</script>